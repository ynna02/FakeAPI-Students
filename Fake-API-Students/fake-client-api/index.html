<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="../css/add.css">
    <link rel="stylesheet" href="../css/style.css">
    
</head>
<body onload="get_record()">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js" integrity="sha512-pumBsjNRGGqkPzKHndZMaAG+bir374sORyzM3uulLV14lN5LyykqNk8eEeUlUkB3U0M4FApyaHraT65ihJhDpQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <div class="container-xl">
        <div class="table-responsive">
            <div class="table-wrapper">
                <div class="table-title bg-success">
                    <div class="row">
                        <div class="col-sm-6">
                            <h2>List of Students</h2>
                        </div>
                    </div>
                </div>
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Firstname</th>
                            <th>Lastname</th>
                            <th>Birthdate</th>
                            <th>Address</th>
                            <th>Course</th>
                            <th>Year Level</th>
                            <th>Email</th>
                            <th>Phone</th>
                        </tr>
                    </thead>
                    <tbody id="datas">
                        
                    </tbody>
                </table>
                
            </div>
        </div>        
    </div>
    <br>
    
        <form action="index.html" method="post" id="posts" class="decor">            
            <div class="form-inner col-12">
              <h1>Student Form</h1>
              <div class="col-12 row">
            <div class="col-md-4"> 
                <input type="text" name="firstname" placeholder="Firstname">
            </div>
            <div class="col-md-4"> 
              <input type="text" name="lastname" placeholder="Lastname">
            </div>
            <div class="col-md-4"> 
                <input type="date" name="birthdate" placeholder="Birthdate">
            </div>
            <div class="col-12">
                <input type="text" name="address" placeholder="Address">
            </div>
            <div class="col-md-6">
                <input type="text" name="course" placeholder="Couse">
            </div>
            <div class="col-md-6">
                <input type="text" name="yearlevel" placeholder="Year Level">
            </div>
            <div class="col-md-6">
                <input type="text" name="email" placeholder="Email">
            </div>
            <div class="col-md-6">
                <input type="text" name="phone" placeholder="Phone No.">
            </div>
            <div class="col-md-12">
                <button>Add Student</button>
            </div>
           
        </div>
            
             
             
            
            </div>
        </form>
    

        <form action="index.html" method="post" id="updates">
            <div class="modal fade" id="orangeModalSubscription" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-notify modal-warning" role="document">
                    <!--Content-->
                    <div class="modal-content">
                        <!--Header-->
                        <div class="modal-header text-center">
                            <h4 class="modal-title w-100 font-weight-bold py-2">Update</h4>
                            <br>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true" class="white-text">&times;</span> </button>
                        </div>
                        <!--Body-->
                        <div class="modal-body">
                            <div class="md-form mb-4">
                                <label for="form1">ID</label>
                                <input type="text" id="form1" name="id" class="form-control validate" value="" readonly> </div>
                            <div class="md-form mb-2">
                                <label for="form2">Firstname</label>
                                <input type="text" id="form2" name="firstname" class="form-control validate" value=""> </div>
                            <div class="md-form mb-2">
                                <label for="form3">Lastname</label>
                                <input type="text" id="form3" name="lastname" class="form-control validate"> </div>
                            <div class="md-form mb-2">
                                <label for="form3">Birthdate</label>
                                <input type="text" id="form4" name="birthdate" class="form-control validate"> </div>
                            <div class="md-form mb-2">
                                <label for="form4">Address</label>
                                <input type="text" id="form5" name="address" class="form-control validate"> </div>
                            <div class="md-form mb-2">
                                <label for="form5">Course</label>
                                <input type="text" id="form6" name="course" class="form-control validate"> </div>
                            <div class="md-form mb-2">
                                <label for="form6">Year Level</label>
                                <input type="text" id="form7" name="yearlevel" class="form-control validate"> </div>
                            <div class="md-form mb-2">
                                <label for="form7">Email</label>
                                <input type="text" id="form8" name="email" class="form-control validate"> </div>
                            <div class="md-form mb-2">
                                <label for="form8">Phone</label>
                                <input type="text" id="form9" name="phone" class="form-control validate"> </div>
                            </div>
                        
                        <!--Footer-->
                        <div class="modal-footer justify-content-center">
                            <button>Update</button>
                            <button data-dismiss="modal" >Cancel</button>
                        </div>
                    </div>
                    <!--/.Content-->
                </div>
            </div>
        </form>

        <form action="index.html" method="post" id="deletes">
            <div class="modal fade" id="orangeModalSubscriptions" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-notify modal-warning" role="document">
                    <!--Content-->
                    <div class="modal-content">
                        <!--Header-->
                        <div class="modal-header text-center">
                            <h4 class="modal-title w-100 font-weight-bold py-2">Are you sure to delete?</h4>
                            <br>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true" class="white-text">&times;</span> </button>
                        </div>
                        <!--Body-->
                        <div class="modal-body">
                            <div class="md-form mb-4">
                                <label for="form1">ID</label>
                                <input type="text" id="form10" name="id" class="form-control validate" readonly> </div>
                            <div class="md-form mb-2">
                                <label for="form2">Firstname</label>
                                <input type="text" id="form11" name="firstname" class="form-control validate" disabled> </div>
                            <div class="md-form mb-2">
                                <label for="form3">Lastname</label>
                                <input type="text" id="form12" name="lastname" class="form-control validate" disabled> </div>
                            <div class="md-form mb-2">
                                <label for="form3">Birthdate</label>
                                <input type="text" id="form13" name="birthdate" class="form-control validate" disabled> </div>
                            <div class="md-form mb-2">
                                <label for="form4">Address</label>
                                <input type="text" id="form14" name="address" class="form-control validate" disabled> </div>
                            <div class="md-form mb-2">
                                <label for="form5">Course</label>
                                <input type="text" id="form15" name="course" class="form-control validate" disabled> </div>
                            <div class="md-form mb-2">
                                <label for="form6">Year Level</label>
                                <input type="text" id="form16" name="yearlevel" class="form-control validate" disabled> </div>
                            <div class="md-form mb-2">
                                <label for="form7">Email</label>
                                <input type="text" id="form17" name="email" class="form-control validate" disabled> </div>
                            <div class="md-form mb-2">
                                <label for="form8">Phone</label>
                                <input type="text" id="form18" name="phone" class="form-control validate" disabled> </div>
                            </div>
                               
                        <!--Footer-->
                        <div class="modal-footer justify-content-center">
                            <button>Yes</button>
                            <button data-dismiss="modal" >No</button>
                            <!-- <button type="button" data-dismiss="modal">No</button> -->
                        </div>
                    </div>
                    <!--/.Content-->
                </div>
            </div>
        </form>

    <script>
        

        txt = "";
        function get_record() {
            $.ajax({
                url: "http://fakeapi-students.test/students/",
                method: "GET",
                success: function(response) {
                    txt = "";
                    for(i=0;i<response.length;i++){
                        txt += `    
                        <tr>
                            <td id="${response[i].id}">${response[i].id}</td>
                            <td>${response[i].firstname}</td>
                            <td>${response[i].lastname}</td>
                            <td>${response[i].birthdate}</td>
                            <td>${response[i].address}</td>
                            <td>${response[i].course}</td>
                            <td>${response[i].yearlevel}</td>
                            <td>${response[i].email}</td>
                            <td>${response[i].phone}</td>
                            <td>
                                <a href="#" class="edit" data-toggle="modal" data-target="#orangeModalSubscription"><i class="material-icons" data-toggle="tooltip" title="Edit">&#xE254;</i></a>
                                <a href="#" class="delete" data-toggle="modal" data-target="#orangeModalSubscriptions"><i class="material-icons" data-toggle="tooltip" title="Delete">&#xE872;</i></a>
                            </td>
                        </tr>
                        `;
                    }
                    document.getElementById("datas").innerHTML = txt;
                    var table = document.getElementById('datas'),rIndex;
                    for(i=0;i < table.rows.length;i++){
                        table.rows[i].onclick = function(){
                            rIndex = this.rowIndex;
                            document.getElementById('form1').value = this.cells[0].innerHTML;
                            document.getElementById('form2').value = this.cells[1].innerHTML;
                            document.getElementById('form3').value = this.cells[2].innerHTML;
                            document.getElementById('form4').value = this.cells[3].innerHTML;
                            document.getElementById('form5').value = this.cells[4].innerHTML;
                            document.getElementById('form6').value = this.cells[5].innerHTML;
                            document.getElementById('form7').value = this.cells[6].innerHTML;
                            document.getElementById('form8').value = this.cells[7].innerHTML;
                            document.getElementById('form9').value = this.cells[8].innerHTML;
                            document.getElementById('form10').value = this.cells[0].innerHTML;
                            document.getElementById('form11').value = this.cells[1].innerHTML;
                            document.getElementById('form12').value = this.cells[2].innerHTML;
                            document.getElementById('form13').value = this.cells[3].innerHTML;
                            document.getElementById('form14').value = this.cells[4].innerHTML;
                            document.getElementById('form15').value = this.cells[5].innerHTML;
                            document.getElementById('form16').value = this.cells[6].innerHTML;
                            document.getElementById('form17').value = this.cells[7].innerHTML;
                            document.getElementById('form18').value = this.cells[8].innerHTML;
                        }
                    }
                },
                error: function(xhr, status, error) {
                    var err = eval("(" + xhr.responseText + ")");                    
                    console.log(err.Message);
                }
            });
        }

        $("form#posts").submit(function(){
            var formData = $(this).serialize();
            console.log(formData);
            $.ajax({
                url: "http://fakeapi-students.test/students/",
                method: "POST",
                data:formData,
                success: function(response) {
                    console.log(response)
                },
                error: function(xhr, status, error) {
                    var err = eval("(" + xhr.responseText + ")");                    
                    console.log(err.Message);
                }
            });
            get_record();
        });
    
        $("form#updates").submit(function(){
            var formData = $(this).serialize();
            console.log(formData);
            $.ajax({
                url: "http://fakeapi-students.test/students/",
                method: "PUT",
                data:formData,
                success: function(response) {
                    console.log(response)
                },
                error: function(xhr, status, error) {
                    var err = eval("(" + xhr.responseText + ")");                    
                    console.log(err.Message);
                }
            });
            get_record();
        });
        
        $("form#deletes").submit(function(){
            var formData = $(this).serialize();
            console.log(formData);
            $.ajax({
                url: "http://fakeapi-students.test/students/",
                method: "DELETE",
                data:formData,
                success: function(response) {
                    console.log(response)
                },
                error: function(xhr, status, error) {
                    var err = eval("(" + xhr.responseText + ")");                    
                    console.log(err.Message);
                }
            });
            get_record();
        });
    </script>






</body>
</html>